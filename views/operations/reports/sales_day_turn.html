{% extends "views/layouts/base.html" %}
{% block title %}Venta x Dia x Turno{% endblock %}
{% block mycss %}{% endblock %}
{% block menutitle %}Venta x Dia x Turno{% endblock %}
{% block content %}
<style>
    table thead .text-end {
      font-size: .7rem;
    }
</style>

<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="sale_day_product-tab" data-bs-toggle="tab" data-bs-target="#sale_day_product" type="button" role="tab" aria-controls="sale_day_product" aria-selected="true">Ventas por Dia por Producto</button>
      </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link " id="sale_day_shif-tab" data-bs-toggle="tab" data-bs-target="#sale_day_shif" type="button" role="tab" aria-controls="sale_day_shif" aria-selected="false">Venta por Dia por Turno</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link " id="sale_day_base-tab" data-bs-toggle="tab" data-bs-target="#sale_day_base" type="button" role="tab" aria-controls="sale_day_base" aria-selected="false">Venta por Dia Base</button>
      </li>
   
  </ul>

<div class="tab-content">
	<div class="tab-pane fade show active" id="sale_day_product" role="tabpanel" aria-labelledby="sale_day_product-tab">
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between;" >
            <div class="card col">
                <div class="card-body">
                        <div class="row">
                            <div class="col-2 ">
                                <label class="col-form-label" for="">Desde: </label>
                                <input type="date" value="2025-01-20" class="form-control form-control-sm" name="from" id="from" required>
                            </div>
                            <div class="col-2 ">
                                <label class="col-form-label" for="">Hasta: </label>
                                <input type="date" class="form-control form-control-sm" name="until" value="{{ (until != false) ? until : 'now'|date('Y-m-d') }}" id="until" required>
                            </div>
                            <div class="col-1 ">
                                <label for="shift" class="col-form-label ">Turno: </label>
                                <select class="selectpicker form-control   border" data-live-search="true" id="shift" name="shift" data-width="100%" required placeholder="Seleccione el turno">
                                    <option value="0" selected>Todos</option>
                                    <option value="11" >Turno 1</option>
                                    <option value="21" >Turno 2</option>
                                    <option value="31" >Turno 3</option>
                                    <option value="41" >Turno 4</option>
                                </select>
                            </div>
                            <div class="col-2 ">
                                <label for="id_producto" class="col-form-label ">Producto: </label>
                                    <select class="selectpicker form-control " data-live-search="true" name="id_producto" id="id_producto" placeholder="Producto" required>
                                        <option value="0" selected >Todos</option>
                                        <option value="1" >T-Maxima Regular</option>
                                        <option value="2" >T-Super Premium</option>
                                        <option value="3" >Diesel</option>
                                    </select>
                            </div>
                            <div class="col-2 " >
                                <button id="seach_sales_day" class="btn btn-sm btn-primary" style="width: 100%; margin-top: 15px;">Generar Reporte</button>
                            </div>
                        </div>
                </div>
            </div>
            
        </div>
        <div class="card">
            <div class="card-header">
                <!-- <div class="card-actions float-end">
                    <div class="dropdown position-relative">
                        <a href="#" data-bs-toggle="dropdown" data-bs-display="static">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal align-middle">
                                <circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>
                            </svg>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#" id="exportExcel"><i data-feather="file-text"></i> Exportar a Excel</a>
                        </div>
                    </div>
                </div> -->
                <h5 class="card-title">Ventas por Dia por Producto</h5>
            </div>
        
            <div class="card-body table-responsive">
        
                <table id="sales_day_table" class="table table-striped table-bordered table-hover table-sm w-100" >
                    <thead id="dynamicHeadersTable">
                        <!-- <tr>
                            <th>Año</th>
                        </tr> -->
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="sale_day_shif" role="tabpanel" aria-labelledby="sale_day_shif-tab">
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between;" >
            <div class="card col">
                <div class="card-body">
                        <div class="row">
                            <div class="col-2 ">
                                <label class="col-form-label" for="">Desde: </label>
                                <input type="date" value="2025-01-20" class="form-control form-control-sm" name="from2" id="from2" required>
                            </div>
                            <div class="col-2 ">
                                <label class="col-form-label" for="">Hasta: </label>
                                <input type="date" class="form-control form-control-sm" name="until2" value="{{ (until != false) ? until : 'now'|date('Y-m-d') }}" id="until2" required>
                            </div>
                            <div class="col-1 ">
                                <label for="shift" class="col-form-label ">Turno: </label>
                                <select class="selectpicker form-control   border" data-live-search="true" id="shift2" name="shift2" data-width="100%" required placeholder="Seleccione el turno">
                                    <option value="0" selected>Todos</option>
                                    <option value="11" >Turno 1</option>
                                    <option value="21" >Turno 2</option>
                                    <option value="31" >Turno 3</option>
                                    <option value="41" >Turno 4</option>
                                </select>
                            </div>
                            <div class="col-2 ">
                                <label for="id_producto" class="col-form-label ">Producto: </label>
                                    <select class="selectpicker form-control " data-live-search="true" name="id_producto2" id="id_producto2" placeholder="Producto" required>
                                        <option value="0" selected >Todos</option>
                                        <option value="1" >T-Maxima Regular</option>
                                        <option value="2" >T-Super Premium</option>
                                        <option value="3" >Diesel</option>
                                    </select>
                            </div>
                            <div class="col-2 " >
                                <button id="seach_sales_day_shif" class="btn btn-sm btn-primary" style="width: 100%; margin-top: 15px;">Generar Reporte</button>
                            </div>
                        </div>
                </div>
            </div>
            
        </div>
        <div class="card">
            <div class="card-header">

                <h5 class="card-title">Ventas por Dia por Turno</h5>
            </div>
        
            <div class="card-body table-responsive">
        
                <table id="sales_day_table_shif" class="table table-striped table-bordered table-hover table-sm w-100" >
                    <thead id="dynamicHeadersTableShif">
                        <!-- <tr>
                            <th>Año</th>
                        </tr> -->
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="sale_day_base" role="tabpanel" aria-labelledby="sale_day_base-tab">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="">Desde: </label>
                        <input type="date"  class="form-control form-control-sm" name="from3" id="from3" value="{{  'now'|date('Y-m-d') }}" required>
                    </div>
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="">Hasta: </label>
                        <input type="date" class="form-control form-control-sm" name="until3"  id="until3" value="{{ (until != false) ? until : 'now'|date('Y-m-d') }}" required>
                    </div>
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="">Zona </label>
                        <select class="form-control form-control-sm" name="zona3" id="zona3" required>
                            <option value="0">Todas</option>
                            <option value="ZONA 1">Zona 1</option>
                            <option value="ZONA 2">Zona 2</option>
                            <option value="ZONA 3">Zona 3</option>
                            <option value="ZONA 4 (Bajío)">Zona 4</option>
                        </select>
                    </div>
                    <div class="col-2 " >
                        <button id="seach_sale_day_base" class="btn btn-sm btn-primary" style="width: 100%; margin-top: 15px;">Generar Reporte</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">Venta x Turno Mes Base</h5>
            </div>
            <div class="card-body table-responsive" id="cont">
                <table id="sale_day_base_table" class="table table-hover table-sm w-100" >
                    <thead>
                        <tr>
                            <th>Año</th>
                            <th>Mes</th>
                            <th>Dia</th>
                            <th>Turno</th>
                            <th>Producto</th>
                            <th>Código Gasolinera</th>
                            <th>Estación</th>
                            <th>Código Producto</th>
                            <th>Ventas Reales</th>
                            <th>Monto Vendido</th>
                            <th>Código Empresa</th>
                            <th>Empresa</th>
                            <th>Estructura</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                    <tfoot>
                    </tfoot>
                </table>
            </div>
        </div>

    </div>
</div>





{% endblock %}
{% block myjs %}
<script src="{{ JS }}operations.js"></script>
<script>
$('#seach_sales_day').on('click',async function() {
    var table = 'seach_sales_day';
    var dynamicColumns = await  generateDateColumnsSalesDay(table);

    await sales_day_table(dynamicColumns);
});
$('#seach_sale_day_base').on('click', function() {
    sale_day_base_table();
});


$('#seach_sales_day_shif').on('click',async function() {
    var table = 'seach_sales_day_shif';

    var dynamicColumns = await  generateDateColumnsSalesDay(table);

    await sales_day_table_shif(dynamicColumns);
});



</script>

</script>
{% endblock %}