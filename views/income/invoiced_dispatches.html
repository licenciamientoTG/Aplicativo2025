{% extends "views/layouts/base.html" %}

{% block title %}Despachos Facturados{% endblock %}

{% block mycss %}
<style>
    /* Estilos personalizados para la tabla */
    tr.group,
    tr.group:hover {
        background-color: rgba(0, 0, 0, 0.1) !important;
    }

    :root.dark tr.group,
    :root.dark tr.group:hover {
        background-color: rgba(0, 0, 0, 0.75) !important;
    }
    .column_estation {
        background-color: #add5e6 !important;
        color: white !important;
    }
    .total_bg {
        background-color: #48A1C7 !important;
        color: white !important;
    }
    .total_bg2 {
        background-color: #48A1C7 !important;
        color: white !important;
    }
    .border_center {
        border-top: 1px dotted  #358f92 !important;
        border-bottom: 1px dotted  #358f92 !important;
        border-left: 1px dotted #358f92 !important;
        border-right: 1px dotted  #358f92 !important;
    }
    table.dataTable thead th, table.dataTable thead td {
        padding: 10px 18px;
        border-bottom: 1px solid #dee2e6;
        background-color: #3485a8 !important;
        color: #ffffff !important;
    }
    table.dataTable tfoot th, table.dataTable tfoot td {
        padding: 10px 18px;
        border-bottom: 1px solid #dee2e6;
        background-color: #3485a8 !important;
        color: #ffffff !important;
    }
    .border_OG {
        border: 0.5px solid #0c202091 !important;
        background-color: #6d7277e8;
    }
</style>
{% endblock %}

{% block menutitle %}Despachos Facturados{% endblock %}

{% block content %}
<div class="row">
    <!-- Tabla de despachos facturados -->
    <div class="card">
        <div class="card-header">
            <h5 class="card-title">Despachos Facturados</h5>
        </div>
        <div class="card-body table-responsive" id="cont">
            <table id="dispatches_table_2" class="table table-striped table-hover table-sm w-100">
                <thead>
                    <tr>
                        <th>Nro Factura</th>
                        <th>Nro Transacción</th>
                        <th>Fecha Transacción</th>
                        <th>Cliente</th>
                        <th>Isla</th>
                        <th>Estación</th>
                        <th>Serie</th>
                        <th>Concepto de Factura</th>
                        <th>Monto</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in dispatches %}
                        <tr>
                            <td>{{ row.nrofac }}</td>
                            <td>{{ row.nrotrn }}</td>
                            <td>{{ row.fchtrn }}</td>
                            <td>{{ row.cliente }}</td>
                            <td>{{ row.islaDen }}</td>
                            <td>{{ row.Estacion }}</td>
                            <td>{{ row.serie }}</td>
                            <td>{{ row.conceptofac }}</td>
                            <td>{{ row.monto | number_format(2, ',', '.') }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th>Nro Factura</th>
                        <th>Nro Transacción</th>
                        <th>Fecha Transacción</th>
                        <th>Cliente</th>
                        <th>Isla</th>
                        <th>Estación</th>
                        <th>Serie</th>
                        <th>Concepto de Factura</th>
                        <th>Monto</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block myjs %}
<script src="{{ JS }}income.js"></script>
<script>
    $(document).ready(function() {
        // Inicializa la tabla con DataTables
        $('#dispatches_table_2').DataTable({
            order: [2, "desc"],  // Orden por Fecha Transacción
            scrollY: '700px',
            scrollX: true,
            scrollCollapse: true,
            paging: true,
            dom: '<"top"Bf>rt<"bottom"lip>',
            buttons: [
                { extend: 'excel', className: 'btn btn-success', text: 'Exportar a Excel' }
            ]
        });
    });
</script>
{% endblock %}
