{% extends "views/layouts/base.html" %}
{% block title %}Pagos Proveedores{% endblock %}
{% block mycss %}{% endblock %}
{% block menutitle %}Pagos Proveedores{% endblock %}
{% block content %}

<style>

table.dataTable thead th, table.dataTable thead td {
    padding: 10px 18px;
    border-bottom: 1px solid #dee2e6;
    background-color:  #3485a8 !important;
    color: #ffffff !important;

}

</style>

<ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link   " id="payment_list-tab" data-bs-toggle="tab" data-bs-target="#payment_list" type="button" role="tab" aria-controls="payment_list" aria-selected="true">Pagos</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link   " id="payment_control-tab" data-bs-toggle="tab" data-bs-target="#payment_control" type="button" role="tab" aria-controls="payment_control" aria-selected="true">Compras</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="resumen_payment-tab" data-bs-toggle="tab" data-bs-target="#resumen_payment" type="button" role="tab" aria-controls="resumen_payment" aria-selected="true">Resumen</button>
    </li>
</ul>

<div class="tab-content" >
    <div class="tab-pane  " id="payment_list" role="tabpanel" aria-labelledby="payment_list-tab">
        <div class="card">
            <div class="card-body">
                <div class="row" style="align-items: flex-end;">
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="from1">Desde: </label>
                        <input type="date"  class="form-control form-control-sm" name="from1" id="from1" value="{{  'first day of this month'|date('Y-m-d') }}" required>
                    </div>
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="until1">Hasta: </label>
                        <input type="date" class="form-control form-control-sm" name="until1"  id="until1" value="{{ (until != false) ? until : 'now'|date('Y-m-d') }}" required>
                    </div>
                     <div class="col-2 ">
                        <select class="selectpicker w-100" data-live-search="true" name="station_id1" id="station_id1" placeholder="Seleccione una estación">
                            <option value="0" {% if not station_id or station_id == 0 %}selected{% endif %}>Todas las estaciones</option>
                            {% for station in stations %}
                                <option value="{{ station.cod }}" {{ station_id == station.cod ? 'selected' : '' }}>{{ station.abr }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-2 " >
                        <button onclick="payment_list()" class="btn btn-sm btn-primary" style="width: 100%; margin-top: 15px;">Generar Reporte</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">Compras </h5>
            </div>
            <div>
                <button id="add_payment" class="btn btn-sm btn-primary" onclick="add_payment()" style="padding: 10px 10px ; margin-left: 15px; margin-top: 10px; border-radius: 15px;">Agregar Pago</button>
            </div>
            <div class="card-body table-responsive" >
                <table id="payment_list_table" class="table table-hover table-sm w-100">
                   <thead>
                         <tr>
                            <th>id</th>
                            <th>Fecha</th>
                            <th>Estatus</th>
                            <th>Cantidad</th>
                            <th>Comentario</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
    <div class="tab-pane  " id="payment_control" role="tabpanel" aria-labelledby="payment_control-tab">
        <div class="card">
            <div class="card-body">
                <div class="row" style="align-items: flex-end;">
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="from1">Desde: </label>
                        <input type="date"  class="form-control form-control-sm" name="from1" id="from1" value="{{  'first day of this month'|date('Y-m-d') }}" required>
                    </div>
                    <div class="col-2 ">
                        <label class="col-form-label-sm" for="until1">Hasta: </label>
                        <input type="date" class="form-control form-control-sm" name="until1"  id="until1" value="{{ (until != false) ? until : 'now'|date('Y-m-d') }}" required>
                    </div>
                     <div class="col-2 ">
                        <select class="selectpicker w-100" data-live-search="true" name="station_id1" id="station_id1" placeholder="Seleccione una estación">
                            {% for station in stations %}
                                <option value="{{ station.cod }}" {{ station_id == station.cod ? 'selected' : '' }}>{{ station.abr }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-2 " >
                        <button onclick="payment_control_table()" class="btn btn-sm btn-primary" style="width: 100%; margin-top: 15px;">Generar Reporte</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">Compras </h5>
            </div>
            <div class="card-body table-responsive" >
                <table id="payment_control_table" class="table table-hover table-sm w-100">
                   <thead>
                         <tr>
                            <th></th>
                            <th>Estacion</th>
                            <th>Folio</th>
                            <th>Factura</th>
                            <th>Remisión</th>
                            <th>Fecha</th>
                            <th>Fecha Vto</th>
                            <th>Producto</th>
                            <th>Proveedor</th>
                            <th>Volumen Recibido</th>
                            <th>Cantidad</th>
                            <th>Precio</th>
                            <th>Monto</th>
                            <th>Monto IIE</th>
                            <th>IVA 8%</th>
                            <th>IVA Extra</th>
                            <th>IVA Total</th>
                            <th>Servicio</th>
                            <th>IVA Servicio</th>
                            <th>Total Factura</th>
                            <th>UID SAT</th>
                        </tr>
                        </thead>
                    <tbody></tbody>
                    <tfoot>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
   <div class="tab-pane active" id="resumen_payment" role="tabpanel" aria-labelledby="resumen_payment-tab">
        <div class="card">
            <div class="card-body">
                <div class="row" style="align-items: flex-end;">
                    <div class="col-2">
                        <label class="col-form-label-sm" for="from_resumen">Desde:</label>
                        <input type="date" class="form-control form-control-sm" name="from_resumen" id="from_resumen" 
                            value="{{ 'first day of this month'|date('Y-m-d') }}" required>
                    </div>
                    <div class="col-2">
                        <label class="col-form-label-sm" for="until_resumen">Hasta:</label>
                        <input type="date" class="form-control form-control-sm" name="until_resumen" id="until_resumen" 
                            value="{{ (until != false) ? until : 'now'|date('Y-m-d') }}" required>
                    </div>
                    <div class="col-2">
                        <label class="col-form-label-sm" for="station_id_resumen">Estación:</label>
                        <select class="selectpicker w-100" data-live-search="true" name="station_id_resumen" 
                                id="station_id_resumen" placeholder="Seleccione una estación">
                            <option value="0" selected>Todas las estaciones</option>
                            {% for station in stations %}
                                <option value="{{ station.cod }}">{{ station.abr }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-2">
                        <label class="col-form-label-sm" for="proveedor_resumen">Proveedor:</label>
                        <select class="selectpicker w-100" data-live-search="true" name="proveedor_resumen" 
                                id="proveedor_resumen">
                            <option value="0" selected>Todos los proveedores</option>
                            {% for proveedor in proveedores %}
                                <option value="{{ proveedor.cod }}">{{ proveedor.den }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-2">
                        <label class="col-form-label-sm" for="company_resumen">Empresa:</label>
                        <select class="selectpicker w-100" name="company_resumen" id="company_resumen">
                            <option value="0" selected>Todas las empresas</option>
                            {% for empresa in empresas %}
                                <option value="{{ empresa.cod }}">{{ empresa.den }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-2">
                        <button onclick="resumen_payment_table()" class="btn btn-sm btn-primary" 
                                style="width: 100%; margin-top: 15px;">
                            Generar Reporte
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Resumen de Pagos - Movimientos de Tanques</h5>
                <div id="table-info" class="text-muted small"></div>
            </div>
            <!-- IMPORTANTE: Agregar clase datatable-wrapper para scroll horizontal -->
            <div class="card-body p-0">
                <div class="table-responsive datatable-wrapper" >
                    <table id="resumen_payment_table" class="table table-hover table-sm table-striped w-100" style="min-width: 2000px;">
                        <thead >
                            <tr>
                                <th >Fecha</th>
                                <th >Estación</th>
                                <th >Número Estación</th>
                                <th >Proveedor Original</th>
                                <th >Producto</th>
                                <th >Num Factura Proveedor original</th>
                                <th >Proveedor Factura Final</th>
                                <th >Litros en Documento</th>
                                <th >Monto Factura</th>
                                <th >Precio Factura</th>
                                <th >UUID</th>
                                <th >Proveedor ControlGas</th>
                                <th >Monto Factura</th>
                                <th >Cantidad Factura</th>
                                <th >Grupo Producto</th>
                                <th >Nro. Transacción</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                        <tfoot >
                                <!-- <th >Fecha</th>
                                <th >Nro. Transacción</th>
                                <th >Estación</th>
                                <th >Número Estación</th>
                                <th >Proveedor Original</th>
                                <th >Productro</th>
                                <th >Vol. Recaudado</th>
                                <th >Vol. Factura Rec.</th>
                                <th >Nro. Factura</th>
                                <th >UUID</th>
                                <th >Proveedor ControlGas</th>
                                <th >Monto Factura</th>
                                <th >Cantidad Factura</th>
                                <th >Precio Factura</th>
                                <th >Grupo Producto</th> -->
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>




{% endblock %}
{% block myjs %}
<script src="{{ JS }}supply.js"></script>
<script>



</script>

</script>
{% endblock %}